{"version":3,"file":"options.bundle.js","mappings":"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","sources":["webpack://wqb-alpha-manager/./src/utils/storage.ts","webpack://wqb-alpha-manager/./src/options/index.ts","webpack://wqb-alpha-manager/webpack/bootstrap","webpack://wqb-alpha-manager/webpack/startup"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getFromLocalStorage = exports.saveToLocalStorage = exports.getSeasonFactors = exports.saveSeasonFactors = exports.updateFactors = exports.getFactors = exports.saveFactors = void 0;\r\nconst STORAGE_KEY = 'submittedFactors';\r\n/**\r\n * Save submitted factors to local storage.\r\n * @param factors - The factors data to save.\r\n */\r\nconst saveFactors = (factors) => {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(factors));\r\n};\r\nexports.saveFactors = saveFactors;\r\n/**\r\n * Retrieve submitted factors from local storage.\r\n * @returns The factors data retrieved from local storage.\r\n */\r\nconst getFactors = () => {\r\n    const factors = localStorage.getItem(STORAGE_KEY);\r\n    return factors ? JSON.parse(factors) : [];\r\n};\r\nexports.getFactors = getFactors;\r\n/**\r\n * Update local storage with new factors if they are not already present.\r\n * @param newFactors - The new factors data to check and potentially save.\r\n */\r\nconst updateFactors = (newFactors) => {\r\n    const existingFactors = (0, exports.getFactors)();\r\n    const updatedFactors = [...existingFactors];\r\n    newFactors.forEach(newFactor => {\r\n        const exists = existingFactors.some(existingFactor => existingFactor.id === newFactor.id);\r\n        if (!exists) {\r\n            updatedFactors.push(newFactor);\r\n        }\r\n    });\r\n    (0, exports.saveFactors)(updatedFactors);\r\n};\r\nexports.updateFactors = updateFactors;\r\nconst saveSeasonFactors = (season, alphas) => {\r\n    return new Promise((resolve) => {\r\n        const data = {\r\n            season,\r\n            alphas,\r\n            lastUpdated: Date.now()\r\n        };\r\n        chrome.storage.local.set({ [season]: data }, () => {\r\n            resolve();\r\n        });\r\n    });\r\n};\r\nexports.saveSeasonFactors = saveSeasonFactors;\r\nconst getSeasonFactors = (season) => {\r\n    return new Promise((resolve) => {\r\n        chrome.storage.local.get([season], (result) => {\r\n            if (result[season]) {\r\n                resolve(result[season].alphas);\r\n            }\r\n            else {\r\n                resolve([]);\r\n            }\r\n        });\r\n    });\r\n};\r\nexports.getSeasonFactors = getSeasonFactors;\r\n// 兼容旧代码的通用方法\r\nconst saveToLocalStorage = (key, value) => {\r\n    return new Promise((resolve) => {\r\n        chrome.storage.local.set({ [key]: value }, resolve);\r\n    });\r\n};\r\nexports.saveToLocalStorage = saveToLocalStorage;\r\nconst getFromLocalStorage = (key) => {\r\n    return new Promise((resolve) => {\r\n        chrome.storage.local.get([key], (result) => resolve(result[key]));\r\n    });\r\n};\r\nexports.getFromLocalStorage = getFromLocalStorage;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst storage_1 = require(\"../utils/storage\");\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    const matchBtn = document.getElementById('matchBtn');\r\n    const fieldInput = document.getElementById('fieldInput');\r\n    const seasonInput = document.getElementById('seasonInput'); // e.g. \"2023-Q1\"\r\n    const resultDiv = document.getElementById('result');\r\n    if (matchBtn) {\r\n        matchBtn.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\r\n            const field = fieldInput.value.trim();\r\n            const season = seasonInput.value.trim();\r\n            if (!field || !season) {\r\n                resultDiv.textContent = \"请输入字段名和赛季 (如 2023-Q1)\";\r\n                return;\r\n            }\r\n            resultDiv.textContent = \"正在搜索...\";\r\n            const alphas = yield (0, storage_1.getSeasonFactors)(season);\r\n            if (!alphas || alphas.length === 0) {\r\n                resultDiv.textContent = `未找到 ${season} 的本地数据，请先去下载。`;\r\n                return;\r\n            }\r\n            // 强匹配逻辑：检查表达式中是否包含该字段\r\n            // 注意：这里只是简单的字符串包含，如果需要精确的词法分析(如你Python脚本里的)，需要移植那个逻辑\r\n            const matched = alphas.filter(alpha => {\r\n                // 简单匹配：完全相等 或者 包含 (根据你的需求调整)\r\n                // 你的需求是：手动输入一个字段去跟本地这个赛季的因子表达式去匹配\r\n                // 假设字段是 \"close\"，表达式是 \"ts_rank(close, 10)\"\r\n                // 这里做一个简单的正则边界匹配\r\n                const regex = new RegExp(`\\\\b${field}\\\\b`);\r\n                return regex.test(alpha.code);\r\n            });\r\n            if (matched.length > 0) {\r\n                resultDiv.innerHTML = `\n                    <h3>匹配成功 (${matched.length} 个):</h3>\n                    <ul>\n                        ${matched.map(a => `\n                            <li>\n                                <strong>ID:</strong> ${a.id}<br/>\n                                <strong>Date:</strong> ${a.dateCreated}<br/>\n                                <code>${a.code}</code>\n                            </li>\n                        `).join('')}\n                    </ul>\n                `;\r\n            }\r\n            else {\r\n                resultDiv.textContent = \"未匹配到任何因子。\";\r\n            }\r\n        }));\r\n    }\r\n});\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(8153);\n"],"names":["Object","defineProperty","exports","value","getFromLocalStorage","saveToLocalStorage","getSeasonFactors","saveSeasonFactors","updateFactors","getFactors","saveFactors","STORAGE_KEY","factors","localStorage","setItem","JSON","stringify","getItem","parse","newFactors","existingFactors","updatedFactors","forEach","newFactor","some","existingFactor","id","push","season","alphas","Promise","resolve","data","lastUpdated","Date","now","chrome","storage","local","set","get","result","key","__awaiter","this","thisArg","_arguments","P","generator","reject","fulfilled","step","next","e","rejected","done","then","apply","storage_1","document","addEventListener","matchBtn","getElementById","fieldInput","seasonInput","resultDiv","field","trim","textContent","length","matched","filter","alpha","RegExp","test","code","innerHTML","map","a","dateCreated","join","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","call"],"ignoreList":[],"sourceRoot":""}