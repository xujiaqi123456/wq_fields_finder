{"version":3,"file":"background.bundle.js","mappings":"oCACAA,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQE,oBAAsBF,EAAQG,mBAAqBH,EAAQI,iBAAmBJ,EAAQK,kBAAoBL,EAAQM,cAAgBN,EAAQO,WAAaP,EAAQQ,iBAAc,EACrL,MAAMC,EAAc,mBAQpBT,EAAQQ,YAHaE,IACjBC,aAAaC,QAAQH,EAAaI,KAAKC,UAAUJ,KAWrDV,EAAQO,WAJW,KACf,MAAMG,EAAUC,aAAaI,QAAQN,GACrC,OAAOC,EAAUG,KAAKG,MAAMN,GAAW,IAkB3CV,EAAQM,cAXeW,IACnB,MAAMC,GAAkB,EAAIlB,EAAQO,cAC9BY,EAAiB,IAAID,GAC3BD,EAAWG,QAAQC,IACAH,EAAgBI,KAAKC,GAAkBA,EAAeC,KAAOH,EAAUG,KAElFL,EAAeM,KAAKJ,MAG5B,EAAIrB,EAAQQ,aAAaW,IAe7BnB,EAAQK,kBAZkB,CAACqB,EAAQC,IACxB,IAAIC,QAASC,IAChB,MAAMC,EAAO,CACTJ,SACAC,SACAI,YAAaC,KAAKC,OAEtBC,OAAOC,QAAQC,MAAMC,IAAI,CAAE,CAACX,GAASI,GAAQ,KACzCD,QAiBZ7B,EAAQI,iBAZkBsB,GACf,IAAIE,QAASC,IAChBK,OAAOC,QAAQC,MAAME,IAAI,CAACZ,GAAUa,IAC5BA,EAAOb,GACPG,EAAQU,EAAOb,GAAQC,QAGvBE,EAAQ,QAYxB7B,EAAQG,mBALmB,CAACqC,EAAKvC,IACtB,IAAI2B,QAASC,IAChBK,OAAOC,QAAQC,MAAMC,IAAI,CAAE,CAACG,GAAMvC,GAAS4B,KASnD7B,EAAQE,oBALqBsC,GAClB,IAAIZ,QAASC,IAChBK,OAAOC,QAAQC,MAAME,IAAI,CAACE,GAAOD,GAAWV,EAAQU,EAAOC,M,GCvE/DC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAa5C,QAGrB,IAAI8C,EAASL,EAAyBE,GAAY,CAGjD3C,QAAS,CAAC,GAOX,OAHA+C,EAAoBJ,GAAUG,EAAQA,EAAO9C,QAAS0C,GAG/CI,EAAO9C,OACf,C,MCnBA,MAAMgD,EAAY,EAAQ,MAC1Bd,OAAOe,QAAQC,YAAYC,YAAY,KACnCC,QAAQC,IAAI,iCAEhBnB,OAAOe,QAAQK,UAAUH,YAAY,CAACI,EAASC,EAAQC,IAC5B,gBAAnBF,EAAQG,SACR,EAAIV,EAAU3C,mBAAmBkD,EAAQ7B,OAAQ6B,EAAQzB,MAAM6B,KAAK,KAChEF,EAAa,CAAEG,OAAQ,eAEpB,GAEY,eAAnBL,EAAQG,SACR,EAAIV,EAAU5C,kBAAkBmD,EAAQ7B,QAAQiC,KAAMhC,IAClD8B,EAAa,CAAE9B,cAEZ,QAJX,E","sources":["webpack://wqb-alpha-manager/./src/utils/storage.ts","webpack://wqb-alpha-manager/webpack/bootstrap","webpack://wqb-alpha-manager/./src/background/index.ts"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getFromLocalStorage = exports.saveToLocalStorage = exports.getSeasonFactors = exports.saveSeasonFactors = exports.updateFactors = exports.getFactors = exports.saveFactors = void 0;\r\nconst STORAGE_KEY = 'submittedFactors';\r\n/**\r\n * Save submitted factors to local storage.\r\n * @param factors - The factors data to save.\r\n */\r\nconst saveFactors = (factors) => {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(factors));\r\n};\r\nexports.saveFactors = saveFactors;\r\n/**\r\n * Retrieve submitted factors from local storage.\r\n * @returns The factors data retrieved from local storage.\r\n */\r\nconst getFactors = () => {\r\n    const factors = localStorage.getItem(STORAGE_KEY);\r\n    return factors ? JSON.parse(factors) : [];\r\n};\r\nexports.getFactors = getFactors;\r\n/**\r\n * Update local storage with new factors if they are not already present.\r\n * @param newFactors - The new factors data to check and potentially save.\r\n */\r\nconst updateFactors = (newFactors) => {\r\n    const existingFactors = (0, exports.getFactors)();\r\n    const updatedFactors = [...existingFactors];\r\n    newFactors.forEach(newFactor => {\r\n        const exists = existingFactors.some(existingFactor => existingFactor.id === newFactor.id);\r\n        if (!exists) {\r\n            updatedFactors.push(newFactor);\r\n        }\r\n    });\r\n    (0, exports.saveFactors)(updatedFactors);\r\n};\r\nexports.updateFactors = updateFactors;\r\nconst saveSeasonFactors = (season, alphas) => {\r\n    return new Promise((resolve) => {\r\n        const data = {\r\n            season,\r\n            alphas,\r\n            lastUpdated: Date.now()\r\n        };\r\n        chrome.storage.local.set({ [season]: data }, () => {\r\n            resolve();\r\n        });\r\n    });\r\n};\r\nexports.saveSeasonFactors = saveSeasonFactors;\r\nconst getSeasonFactors = (season) => {\r\n    return new Promise((resolve) => {\r\n        chrome.storage.local.get([season], (result) => {\r\n            if (result[season]) {\r\n                resolve(result[season].alphas);\r\n            }\r\n            else {\r\n                resolve([]);\r\n            }\r\n        });\r\n    });\r\n};\r\nexports.getSeasonFactors = getSeasonFactors;\r\n// 兼容旧代码的通用方法\r\nconst saveToLocalStorage = (key, value) => {\r\n    return new Promise((resolve) => {\r\n        chrome.storage.local.set({ [key]: value }, resolve);\r\n    });\r\n};\r\nexports.saveToLocalStorage = saveToLocalStorage;\r\nconst getFromLocalStorage = (key) => {\r\n    return new Promise((resolve) => {\r\n        chrome.storage.local.get([key], (result) => resolve(result[key]));\r\n    });\r\n};\r\nexports.getFromLocalStorage = getFromLocalStorage;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/// <reference types=\"chrome\"/>\r\nconst storage_1 = require(\"../utils/storage\");\r\nchrome.runtime.onInstalled.addListener(() => {\r\n    console.log(\"WQB Alpha Manager Installed\");\r\n});\r\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\r\n    if (request.action === \"save_alphas\") {\r\n        (0, storage_1.saveSeasonFactors)(request.season, request.data).then(() => {\r\n            sendResponse({ status: \"success\" });\r\n        });\r\n        return true;\r\n    }\r\n    if (request.action === \"get_alphas\") {\r\n        (0, storage_1.getSeasonFactors)(request.season).then((alphas) => {\r\n            sendResponse({ alphas });\r\n        });\r\n        return true;\r\n    }\r\n});\r\n"],"names":["Object","defineProperty","exports","value","getFromLocalStorage","saveToLocalStorage","getSeasonFactors","saveSeasonFactors","updateFactors","getFactors","saveFactors","STORAGE_KEY","factors","localStorage","setItem","JSON","stringify","getItem","parse","newFactors","existingFactors","updatedFactors","forEach","newFactor","some","existingFactor","id","push","season","alphas","Promise","resolve","data","lastUpdated","Date","now","chrome","storage","local","set","get","result","key","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","storage_1","runtime","onInstalled","addListener","console","log","onMessage","request","sender","sendResponse","action","then","status"],"ignoreList":[],"sourceRoot":""}